(this["webpackJsonpfifteen-puzzle"]=this["webpackJsonpfifteen-puzzle"]||[]).push([[0],{10:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(4),l=c.n(a),o=(c(3),c(0));var r=()=>{const[e,t]=Object(n.useState)("normal"),[c,s]=Object(n.useState)([]),[a,l]=Object(n.useState)({rows:4,columns:4}),[r,i]=Object(n.useState)(0),[j,m]=Object(n.useState)(0),[u,d]=Object(n.useState)(null),[b,h]=Object(n.useState)([]),[O,x]=Object(n.useState)(null),[g,p]=Object(n.useState)(!1),[f,w]=Object(n.useState)(!1),[v,N]=Object(n.useState)(!1),k=Object(n.useRef)(null),S=Object(n.useCallback)((()=>{const{rows:e,columns:t}=a,c=e*t;let n;do{n=Array.from({length:c-1},((e,t)=>t+1)),n.push(""),n=y(n)}while(!C(n,e,t));s(z(n,t)),N(!1)}),[a]);Object(n.useEffect)((()=>{S()}),[a,S]),Object(n.useEffect)((()=>{M(c)&&(clearInterval(u),h((e=>[...e,{moves:r,time:j}])),N(!0))}),[c]);const y=e=>{const t=[...e];for(let c=t.length-1;c>0;c--){const e=Math.floor(Math.random()*(c+1));[t[c],t[e]]=[t[e],t[c]]}return t},z=(e,t)=>Array.from({length:Math.ceil(e.length/t)},((c,n)=>e.slice(n*t,n*t+t))),C=(e,t,c)=>{const n=e.flat?e.flat():e;let s=0;const a=n.indexOf("");for(let l=0;l<n.length-1;l++)for(let e=l+1;e<n.length;e++)n[l]&&n[e]&&n[l]>n[e]&&s++;if(c%2===1)return s%2===0;return(s+Math.floor(a/c))%2===1},M=e=>{const t=e.flat();for(let c=0;c<t.length-1;c++)if(t[c]!==c+1)return!1;return""===t[t.length-1]},I=()=>{for(let e=0;e<c.length;e++)for(let t=0;t<c[e].length;t++)if(""===c[e][t])return{row:e,col:t};return null},R=(e,t,c)=>e===c.row||t===c.col,E=e=>{t(e),x(null),l({rows:4,columns:4}),S()},A=e=>{const{name:t,value:c}=e.target;l((e=>({...e,[t]:parseInt(c,10)})))};Object(n.useEffect)((()=>{if("image"===e&&O){const e=new Image;e.onload=()=>{const t=e.width/e.height;let c=Math.round(4*t);c=Math.max(2,c),l({rows:4,columns:c})},e.src=O}}),[O,e]);return Object(o.jsxs)("div",{className:"puzzle-container",children:[Object(o.jsx)("h1",{className:"title",children:"15 Puzzle Game"}),Object(o.jsxs)("div",{className:"controls",children:[Object(o.jsxs)("div",{className:"mode-buttons",children:[Object(o.jsx)("button",{className:"mode-button ".concat("normal"===e?"active":""),onClick:()=>E("normal"),children:"\u901a\u5e38\u30e2\u30fc\u30c9"}),Object(o.jsx)("button",{className:"mode-button ".concat("image"===e?"active":""),onClick:()=>E("image"),children:"\u753b\u50cf\u30e2\u30fc\u30c9"})]}),Object(o.jsx)("div",{className:"size-controls",children:"normal"===e&&Object(o.jsxs)(o.Fragment,{children:["\u7e26:",Object(o.jsx)("input",{type:"number",name:"rows",className:"size-input",value:a.rows,onChange:A,min:"2",max:"10"}),"\u6a2a:",Object(o.jsx)("input",{type:"number",name:"columns",className:"size-input",value:a.columns,onChange:A,min:"2",max:"10"})]})}),Object(o.jsx)("button",{className:"new-game-button",onClick:()=>{i(0),m(0),w(!1),u&&(clearInterval(u),d(null)),S()},children:"\u65b0\u3057\u3044\u30b2\u30fc\u30e0"}),Object(o.jsx)("button",{className:"reset-button",onClick:()=>{u&&(clearInterval(u),d(null)),i(0),m(0),w(!1),x(null),l({rows:4,columns:4}),S()},children:"\u30ea\u30bb\u30c3\u30c8"}),"image"===e&&Object(o.jsxs)("div",{className:"image-controls",children:[Object(o.jsx)("button",{className:"image-upload-button",onClick:()=>{k.current.click()},children:"\u753b\u50cf\u3092\u5909\u66f4"}),Object(o.jsx)("input",{type:"file",ref:k,onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{x(e.target.result)},e.readAsDataURL(t)}},accept:"image/*",style:{display:"none"}}),O&&Object(o.jsx)("img",{src:O,alt:"uploaded",className:"uploaded-image-preview"})]}),"image"===e&&Object(o.jsx)("div",{className:"assist-mode",children:Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{type:"checkbox",checked:g,onChange:()=>{p(!g)}}),"\u88dc\u52a9\u30e2\u30fc\u30c9"]})})]}),Object(o.jsx)("div",{className:"board",style:{gridTemplateRows:"repeat(".concat(a.rows,", 1fr)"),gridTemplateColumns:"repeat(".concat(a.columns,", 1fr)"),aspectRatio:"".concat(a.columns," / ").concat(a.rows)},children:c.map(((t,c)=>t.map(((t,n)=>Object(o.jsx)("button",{className:"cell ".concat(""===t?"empty":""),onClick:()=>((t,c)=>{if("image"===e&&!O)return;const n=I();if(R(t,c,n)){let e=[];if(s((s=>{e=s.map((e=>[...e]));const[a,l]=[Math.sign(t-n.row),Math.sign(c-n.col)];let o=n.row,r=n.col;for(;o!==t||r!==c;){const t=o+a,c=r+l;e[o][r]=e[t][c],o=t,r=c}return e[t][c]="",e})),i((e=>e+1)),!f){w(!0);const e=setInterval((()=>m((e=>e+1))),1e3);d(e)}}})(c,n),style:{backgroundImage:"image"===e&&t&&O?"url(".concat(O,")"):"none",backgroundSize:"".concat(100*a.columns,"% ").concat(100*a.rows,"%"),backgroundPosition:"image"===e&&t&&O?"".concat((t-1)%a.columns/(a.columns-1)*100,"% ").concat(Math.floor((t-1)/a.columns)/(a.rows-1)*100,"%"):"none",border:"image"===e&&g&&t?"1px solid #000":"none",color:"image"===e&&g&&t?"#fff":"inherit",textShadow:"image"===e&&g&&t?"2px 2px 4px #000":"none"},children:"normal"===e||g?t:""},"".concat(c,"-").concat(n))))))}),Object(o.jsxs)("div",{className:"stats",children:[Object(o.jsxs)("p",{children:["\u79fb\u52d5\u56de\u6570: ",r]}),Object(o.jsxs)("p",{children:["\u7d4c\u904e\u6642\u9593: ",j,"\u79d2"]})]}),v&&Object(o.jsxs)("div",{className:"completion-message",children:[Object(o.jsx)("p",{children:"\u30af\u30ea\u30a2\uff01\u304a\u3081\u3067\u3068\u3046\uff01"}),Object(o.jsxs)("p",{children:["\u79fb\u52d5\u56de\u6570: ",r," \u624b"]}),Object(o.jsxs)("p",{children:["\u7d4c\u904e\u6642\u9593: ",j," \u79d2"]}),Object(o.jsx)("div",{className:"completed-board",children:c.map(((t,c)=>t.map(((t,n)=>Object(o.jsx)("div",{className:"completed-cell",style:{backgroundImage:"image"===e&&t&&O?"url(".concat(O,")"):"none",backgroundSize:"".concat(100*a.columns,"% ").concat(100*a.rows,"%"),backgroundPosition:"image"===e&&t&&O?"".concat((t-1)%a.columns/(a.columns-1)*100,"% ").concat(Math.floor((t-1)/a.columns)/(a.rows-1)*100,"%"):"none",border:"1px solid #000",color:"#fff",textShadow:"2px 2px 4px #000"},children:t},"".concat(c,"-").concat(n))))))})]}),Object(o.jsxs)("div",{className:"rankings",children:[Object(o.jsx)("h2",{children:"\u30e9\u30f3\u30ad\u30f3\u30b0"}),Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"\u9806\u4f4d"}),Object(o.jsx)("th",{children:"\u79fb\u52d5\u56de\u6570"}),Object(o.jsx)("th",{children:"\u6642\u9593"})]})}),Object(o.jsx)("tbody",{children:b.map(((e,t)=>Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:t+1}),Object(o.jsx)("td",{children:e.moves}),Object(o.jsxs)("td",{children:[e.time,"\u79d2"]})]},t)))})]})]})]})};l.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(r,{})}),document.getElementById("root"))},3:function(e,t,c){}},[[10,1,2]]]);
//# sourceMappingURL=main.6a269283.chunk.js.map